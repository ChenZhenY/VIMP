\hypertarget{result__recorder_8h_source}{}\doxysection{result\+\_\+recorder.\+h}
\label{result__recorder_8h_source}\index{include/helpers/result\_recorder.h@{include/helpers/result\_recorder.h}}
\mbox{\hyperlink{result__recorder_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{repeated__includes_8h}{repeated\_includes.h}}"{}}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{keyword}{namespace }VIMP\{}
\DoxyCodeLine{15     \textcolor{keyword}{struct }\mbox{\hyperlink{structVIMP_1_1VIMPResults}{VIMPResults}}\{}
\DoxyCodeLine{16         MatrixXd \_res\_mean;}
\DoxyCodeLine{17         vector<MatrixXd> \_vec\_res\_covariances;}
\DoxyCodeLine{18         \textcolor{keywordtype}{int} \_niters, \_nstates;}
\DoxyCodeLine{19         \textcolor{keywordtype}{int} \_cur\_iter=0;}
\DoxyCodeLine{20 }
\DoxyCodeLine{21         std::string \_file\_mean;}
\DoxyCodeLine{22         std::string \_file\_cov;}
\DoxyCodeLine{23 }
\DoxyCodeLine{30         \mbox{\hyperlink{structVIMP_1_1VIMPResults_aac432d1503fa297b966e5a79b480c0d7}{VIMPResults}}(\textcolor{keywordtype}{int} niters, \textcolor{keywordtype}{int} nstates)\{}
\DoxyCodeLine{31             \_niters = niters;}
\DoxyCodeLine{32             \_nstates = nstates;}
\DoxyCodeLine{33             \_file\_mean = \textcolor{stringliteral}{"{}mean.csv"{}};}
\DoxyCodeLine{34             \_file\_cov = \textcolor{stringliteral}{"{}cov.csv"{}};}
\DoxyCodeLine{35             \mbox{\hyperlink{structVIMP_1_1VIMPResults_ac3b06e6e7142f192f44f96824e3cc1f1}{reinitialize\_data}}();}
\DoxyCodeLine{36         \}}
\DoxyCodeLine{37 }
\DoxyCodeLine{42         \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{structVIMP_1_1VIMPResults_ac3b06e6e7142f192f44f96824e3cc1f1}{reinitialize\_data}}()\{}
\DoxyCodeLine{43             \_res\_mean = std::move(MatrixXd::Zero(\_niters, \_nstates));}
\DoxyCodeLine{44             \_vec\_res\_covariances.resize(\_niters);}
\DoxyCodeLine{45             \_cur\_iter = 0;}
\DoxyCodeLine{46         \}}
\DoxyCodeLine{47 }
\DoxyCodeLine{53         \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{structVIMP_1_1VIMPResults_ae82b34bf5881ecfb11229cb030b4c599}{update\_niters}}(\textcolor{keywordtype}{int} niters)\{}
\DoxyCodeLine{54             \_niters = niters;}
\DoxyCodeLine{55             \mbox{\hyperlink{structVIMP_1_1VIMPResults_ac3b06e6e7142f192f44f96824e3cc1f1}{reinitialize\_data}}();}
\DoxyCodeLine{56         \}}
\DoxyCodeLine{57 }
\DoxyCodeLine{64         \textcolor{keywordtype}{void} \mbox{\hyperlink{structVIMP_1_1VIMPResults_aee1c477566f1c99ac1b6ebbd067f5842}{update\_data}}(\textcolor{keyword}{const} VectorXd\& new\_mean, \textcolor{keyword}{const} MatrixXd\& new\_cov)\{}
\DoxyCodeLine{65             \textcolor{keywordflow}{if} (\_cur\_iter < \_niters)\{}
\DoxyCodeLine{66                 \_res\_mean.row(\_cur\_iter) = std::move(new\_mean.transpose());}
\DoxyCodeLine{67                 \_vec\_res\_covariances[\_cur\_iter] = std::move(new\_cov);}
\DoxyCodeLine{68                 \_cur\_iter += 1;}
\DoxyCodeLine{69             \}}
\DoxyCodeLine{70             \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{71                 cout << \textcolor{stringliteral}{"{}reached the last iteration"{}} << endl;}
\DoxyCodeLine{72             \}}
\DoxyCodeLine{73         \}}
\DoxyCodeLine{74 }
\DoxyCodeLine{80         \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{structVIMP_1_1VIMPResults_acfce0be1f54de4dc6603edf651b84e06}{print\_data}}(\textcolor{keywordtype}{int} i\_iter)\{}
\DoxyCodeLine{81             assert(i\_iter < \_niters);}
\DoxyCodeLine{82             cout << \textcolor{stringliteral}{"{}mean: "{}} << endl << \_res\_mean.row(i\_iter) << endl << endl;}
\DoxyCodeLine{83             cout << \textcolor{stringliteral}{"{}covariance: "{}} << endl << \_vec\_res\_covariances[i\_iter] << endl;}
\DoxyCodeLine{84 }
\DoxyCodeLine{85         \}}
\DoxyCodeLine{86 }
\DoxyCodeLine{93         \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{structVIMP_1_1VIMPResults_ac7273d9cedbd0b05e9ff2e15a1372bff}{update\_file\_names}}(\textcolor{keyword}{const} \textcolor{keywordtype}{string}\& file\_mean, \textcolor{keyword}{const} \textcolor{keywordtype}{string}\& file\_cov)\{}
\DoxyCodeLine{94             \_file\_mean = file\_mean;}
\DoxyCodeLine{95             \_file\_cov = file\_cov;}
\DoxyCodeLine{96         \}}
\DoxyCodeLine{97 }
\DoxyCodeLine{101         \textcolor{keywordtype}{void} \mbox{\hyperlink{structVIMP_1_1VIMPResults_a8670861c4173c19e905146404363378a}{save\_data}}()\{}
\DoxyCodeLine{103             ofstream file(\_file\_mean);}
\DoxyCodeLine{104             \textcolor{keywordflow}{if} (file.is\_open())\{}
\DoxyCodeLine{105                 file << \_res\_mean.format(CSVFormat);}
\DoxyCodeLine{106                 file.close();}
\DoxyCodeLine{107             \}}
\DoxyCodeLine{108 }
\DoxyCodeLine{110             ofstream f\_cov(\_file\_cov);}
\DoxyCodeLine{111             \textcolor{keywordflow}{if} (f\_cov.is\_open())\{}
\DoxyCodeLine{112                 \textcolor{keywordflow}{for} (MatrixXd\& i\_cov:\_vec\_res\_covariances)\{}
\DoxyCodeLine{113                     f\_cov << i\_cov.format(CSVFormat) << \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{114                 \}}
\DoxyCodeLine{115 }
\DoxyCodeLine{116                 f\_cov.close();}
\DoxyCodeLine{117             \}}
\DoxyCodeLine{118         \}}
\DoxyCodeLine{119             }
\DoxyCodeLine{120     \};}
\DoxyCodeLine{121 \}}

\end{DoxyCode}
